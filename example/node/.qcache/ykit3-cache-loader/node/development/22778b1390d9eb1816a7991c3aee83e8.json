{"remainingRequest":"/Users/Aaron/Desktop/work/qunar/work/ykit3/packages/ykit3-cli/node_modules/babel-loader/lib/index.js??ref--4-2!/Users/Aaron/Desktop/work/qunar/work/sniperjs/example/node/node_modules/redux-actions/es/utils/flattenWhenNode.js","dependencies":[{"path":"/Users/Aaron/Desktop/work/qunar/work/sniperjs/example/node/node_modules/redux-actions/es/utils/flattenWhenNode.js","hash":"8d8b596672bd15e1ede0e85ada948897"},{"path":"/Users/Aaron/Desktop/work/qunar/work/ykit3/packages/ykit3-cli/node_modules/cache-loader-hash/dist/cjs.js","hash":"d62e2d390167bf8193569f1644327c55"},{"path":"/Users/Aaron/Desktop/work/qunar/work/ykit3/packages/ykit3-cli/node_modules/babel-loader/lib/index.js","hash":"19adf3159c902f1ed7907f3931384270"}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7Cgp2YXIgX2NvbnN0YW50cyA9IHJlcXVpcmUoIi4uL2NvbnN0YW50cyIpOwoKdmFyIF9vd25LZXlzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuL293bktleXMiKSk7Cgp2YXIgX2dldCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiLi9nZXQiKSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKdmFyIF9kZWZhdWx0ID0gZnVuY3Rpb24gX2RlZmF1bHQocHJlZGljYXRlKSB7CiAgcmV0dXJuIGZ1bmN0aW9uIGZsYXR0ZW4obWFwLCBfdGVtcCwgcGFydGlhbEZsYXRNYXAsIHBhcnRpYWxGbGF0QWN0aW9uVHlwZSkgewogICAgdmFyIF9yZWYgPSBfdGVtcCA9PT0gdm9pZCAwID8ge30gOiBfdGVtcCwKICAgICAgICBfcmVmJG5hbWVzcGFjZSA9IF9yZWYubmFtZXNwYWNlLAogICAgICAgIG5hbWVzcGFjZSA9IF9yZWYkbmFtZXNwYWNlID09PSB2b2lkIDAgPyBfY29uc3RhbnRzLkRFRkFVTFRfTkFNRVNQQUNFIDogX3JlZiRuYW1lc3BhY2UsCiAgICAgICAgcHJlZml4ID0gX3JlZi5wcmVmaXg7CgogICAgaWYgKHBhcnRpYWxGbGF0TWFwID09PSB2b2lkIDApIHsKICAgICAgcGFydGlhbEZsYXRNYXAgPSB7fTsKICAgIH0KCiAgICBpZiAocGFydGlhbEZsYXRBY3Rpb25UeXBlID09PSB2b2lkIDApIHsKICAgICAgcGFydGlhbEZsYXRBY3Rpb25UeXBlID0gJyc7CiAgICB9CgogICAgZnVuY3Rpb24gY29ubmVjdE5hbWVzcGFjZSh0eXBlKSB7CiAgICAgIHZhciBfcmVmMjsKCiAgICAgIGlmICghcGFydGlhbEZsYXRBY3Rpb25UeXBlKSByZXR1cm4gdHlwZTsKICAgICAgdmFyIHR5cGVzID0gdHlwZS50b1N0cmluZygpLnNwbGl0KF9jb25zdGFudHMuQUNUSU9OX1RZUEVfREVMSU1JVEVSKTsKICAgICAgdmFyIHBhcnRpYWxzID0gcGFydGlhbEZsYXRBY3Rpb25UeXBlLnNwbGl0KF9jb25zdGFudHMuQUNUSU9OX1RZUEVfREVMSU1JVEVSKTsKICAgICAgcmV0dXJuIChfcmVmMiA9IFtdKS5jb25jYXQuYXBwbHkoX3JlZjIsIHBhcnRpYWxzLm1hcChmdW5jdGlvbiAocCkgewogICAgICAgIHJldHVybiB0eXBlcy5tYXAoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgIHJldHVybiAiIiArIHAgKyBuYW1lc3BhY2UgKyB0OwogICAgICAgIH0pOwogICAgICB9KSkuam9pbihfY29uc3RhbnRzLkFDVElPTl9UWVBFX0RFTElNSVRFUik7CiAgICB9CgogICAgZnVuY3Rpb24gY29ubmVjdFByZWZpeCh0eXBlKSB7CiAgICAgIGlmIChwYXJ0aWFsRmxhdEFjdGlvblR5cGUgfHwgIXByZWZpeCB8fCBwcmVmaXggJiYgbmV3IFJlZ0V4cCgiXiIgKyBwcmVmaXggKyBuYW1lc3BhY2UpLnRlc3QodHlwZSkpIHsKICAgICAgICByZXR1cm4gdHlwZTsKICAgICAgfQoKICAgICAgcmV0dXJuICIiICsgcHJlZml4ICsgbmFtZXNwYWNlICsgdHlwZTsKICAgIH0KCiAgICAoMCwgX293bktleXMuZGVmYXVsdCkobWFwKS5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7CiAgICAgIHZhciBuZXh0TmFtZXNwYWNlID0gY29ubmVjdFByZWZpeChjb25uZWN0TmFtZXNwYWNlKHR5cGUpKTsKICAgICAgdmFyIG1hcFZhbHVlID0gKDAsIF9nZXQuZGVmYXVsdCkodHlwZSwgbWFwKTsKCiAgICAgIGlmIChwcmVkaWNhdGUobWFwVmFsdWUpKSB7CiAgICAgICAgZmxhdHRlbihtYXBWYWx1ZSwgewogICAgICAgICAgbmFtZXNwYWNlOiBuYW1lc3BhY2UsCiAgICAgICAgICBwcmVmaXg6IHByZWZpeAogICAgICAgIH0sIHBhcnRpYWxGbGF0TWFwLCBuZXh0TmFtZXNwYWNlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBwYXJ0aWFsRmxhdE1hcFtuZXh0TmFtZXNwYWNlXSA9IG1hcFZhbHVlOwogICAgICB9CiAgICB9KTsKICAgIHJldHVybiBwYXJ0aWFsRmxhdE1hcDsKICB9Owp9OwoKZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7"},{"version":3,"sources":["/Users/Aaron/Desktop/work/qunar/work/sniperjs/example/node/node_modules/redux-actions/es/utils/flattenWhenNode.js"],"names":["predicate","flatten","map","_temp","partialFlatMap","partialFlatActionType","_ref","_ref$namespace","namespace","DEFAULT_NAMESPACE","prefix","connectNamespace","type","_ref2","types","toString","split","ACTION_TYPE_DELIMITER","partials","concat","apply","p","t","join","connectPrefix","RegExp","test","forEach","nextNamespace","mapValue"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;eACgB,kBAAUA,SAAV,EAAqB;AACnC,SAAO,SAASC,OAAT,CAAiBC,GAAjB,EAAsBC,KAAtB,EAA6BC,cAA7B,EAA6CC,qBAA7C,EAAoE;AACzE,QAAIC,IAAI,GAAGH,KAAK,KAAK,KAAK,CAAf,GAAmB,EAAnB,GAAwBA,KAAnC;AAAA,QACII,cAAc,GAAGD,IAAI,CAACE,SAD1B;AAAA,QAEIA,SAAS,GAAGD,cAAc,KAAK,KAAK,CAAxB,GAA4BE,4BAA5B,GAAgDF,cAFhE;AAAA,QAGIG,MAAM,GAAGJ,IAAI,CAACI,MAHlB;;AAKA,QAAIN,cAAc,KAAK,KAAK,CAA5B,EAA+B;AAC7BA,MAAAA,cAAc,GAAG,EAAjB;AACD;;AAED,QAAIC,qBAAqB,KAAK,KAAK,CAAnC,EAAsC;AACpCA,MAAAA,qBAAqB,GAAG,EAAxB;AACD;;AAED,aAASM,gBAAT,CAA0BC,IAA1B,EAAgC;AAC9B,UAAIC,KAAJ;;AAEA,UAAI,CAACR,qBAAL,EAA4B,OAAOO,IAAP;AAC5B,UAAIE,KAAK,GAAGF,IAAI,CAACG,QAAL,GAAgBC,KAAhB,CAAsBC,gCAAtB,CAAZ;AACA,UAAIC,QAAQ,GAAGb,qBAAqB,CAACW,KAAtB,CAA4BC,gCAA5B,CAAf;AACA,aAAO,CAACJ,KAAK,GAAG,EAAT,EAAaM,MAAb,CAAoBC,KAApB,CAA0BP,KAA1B,EAAiCK,QAAQ,CAAChB,GAAT,CAAa,UAAUmB,CAAV,EAAa;AAChE,eAAOP,KAAK,CAACZ,GAAN,CAAU,UAAUoB,CAAV,EAAa;AAC5B,iBAAO,KAAKD,CAAL,GAASb,SAAT,GAAqBc,CAA5B;AACD,SAFM,CAAP;AAGD,OAJuC,CAAjC,EAIHC,IAJG,CAIEN,gCAJF,CAAP;AAKD;;AAED,aAASO,aAAT,CAAuBZ,IAAvB,EAA6B;AAC3B,UAAIP,qBAAqB,IAAI,CAACK,MAA1B,IAAoCA,MAAM,IAAI,IAAIe,MAAJ,CAAW,MAAMf,MAAN,GAAeF,SAA1B,EAAqCkB,IAArC,CAA0Cd,IAA1C,CAAlD,EAAmG;AACjG,eAAOA,IAAP;AACD;;AAED,aAAO,KAAKF,MAAL,GAAcF,SAAd,GAA0BI,IAAjC;AACD;;AAED,0BAAQV,GAAR,EAAayB,OAAb,CAAqB,UAAUf,IAAV,EAAgB;AACnC,UAAIgB,aAAa,GAAGJ,aAAa,CAACb,gBAAgB,CAACC,IAAD,CAAjB,CAAjC;AACA,UAAIiB,QAAQ,GAAG,kBAAIjB,IAAJ,EAAUV,GAAV,CAAf;;AAEA,UAAIF,SAAS,CAAC6B,QAAD,CAAb,EAAyB;AACvB5B,QAAAA,OAAO,CAAC4B,QAAD,EAAW;AAChBrB,UAAAA,SAAS,EAAEA,SADK;AAEhBE,UAAAA,MAAM,EAAEA;AAFQ,SAAX,EAGJN,cAHI,EAGYwB,aAHZ,CAAP;AAID,OALD,MAKO;AACLxB,QAAAA,cAAc,CAACwB,aAAD,CAAd,GAAgCC,QAAhC;AACD;AACF,KAZD;AAaA,WAAOzB,cAAP;AACD,GAjDD;AAkDD,C","sourcesContent":["import { DEFAULT_NAMESPACE, ACTION_TYPE_DELIMITER } from '../constants';\nimport ownKeys from './ownKeys';\nimport get from './get';\nexport default (function (predicate) {\n  return function flatten(map, _temp, partialFlatMap, partialFlatActionType) {\n    var _ref = _temp === void 0 ? {} : _temp,\n        _ref$namespace = _ref.namespace,\n        namespace = _ref$namespace === void 0 ? DEFAULT_NAMESPACE : _ref$namespace,\n        prefix = _ref.prefix;\n\n    if (partialFlatMap === void 0) {\n      partialFlatMap = {};\n    }\n\n    if (partialFlatActionType === void 0) {\n      partialFlatActionType = '';\n    }\n\n    function connectNamespace(type) {\n      var _ref2;\n\n      if (!partialFlatActionType) return type;\n      var types = type.toString().split(ACTION_TYPE_DELIMITER);\n      var partials = partialFlatActionType.split(ACTION_TYPE_DELIMITER);\n      return (_ref2 = []).concat.apply(_ref2, partials.map(function (p) {\n        return types.map(function (t) {\n          return \"\" + p + namespace + t;\n        });\n      })).join(ACTION_TYPE_DELIMITER);\n    }\n\n    function connectPrefix(type) {\n      if (partialFlatActionType || !prefix || prefix && new RegExp(\"^\" + prefix + namespace).test(type)) {\n        return type;\n      }\n\n      return \"\" + prefix + namespace + type;\n    }\n\n    ownKeys(map).forEach(function (type) {\n      var nextNamespace = connectPrefix(connectNamespace(type));\n      var mapValue = get(type, map);\n\n      if (predicate(mapValue)) {\n        flatten(mapValue, {\n          namespace: namespace,\n          prefix: prefix\n        }, partialFlatMap, nextNamespace);\n      } else {\n        partialFlatMap[nextNamespace] = mapValue;\n      }\n    });\n    return partialFlatMap;\n  };\n});"]}]}